$def with (hosts, form, refresh_time)
$var title: Pi Master
$var cssfiles: /static/bootstrap/css/bootstrap.css
<meta http-equiv="refresh" content="$refresh_time">
<div class="container">
    <div class="row">
        <div class="col-lg-6 well">
            <form role="form" class="form-inline" name="stack-form" method="post" action="add">
                $if not form.valid: <p class="error">Invalid entry</p>
                <div class="form-group">
                    $:form.address.render()
                </div>
                <div class="form-group">
                    $:form.stack.render()
                </div>
                <button value="Add" type="submit" class="form-control btn btn-info">Submit</button>

            </form>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">

        <div class="col-md-6 col-lg-3 col-sm-6">
            <div class="panel panel-danger">
                <div class="panel-heading">
                    Red Stack
                </div>
                <div class="list-group">
                    $for host in hosts['red']

                        $ link = "/host/%s" % host.id
                        $ state = host.hbstate
                        <a class="list-group-item list-group-item-$state" href="$link">$host['address']</a>
                </div>
            </div>
        </div>

        <div class="col-md-6 col-lg-3 col-sm-6">
            <div class="panel panel-warning">
                <div class="panel-heading">
                    Yellow Stack
                </div>
                <div class="list-group">
                    $for host in hosts['yellow']

                        $ link = "/host/%s" % host.id
                        $ state = host.hbstate
                        <a class="list-group-item list-group-item-$state" href="$link">$host['address']</a>
                </div>
            </div>
        </div>

        <div class="col-md-6 col-lg-3 col-sm-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Grey Stack
                </div>
                <div class="list-group">
                    $for host in hosts['grey']

                        $ link = "/host/%s" % host.id
                        $ state = host.hbstate
                        <a class="list-group-item list-group-item-$state" href="$link">$host['address']</a>
                </div>
            </div>
        </div>

        <div class="col-md-6 col-lg-3 col-sm-6">
            <div class="panel panel-success">
                <div class="panel-heading">
                    Green Stack
                </div>
                <div class="list-group">
                    $for host in hosts['green']
                        <!-- TODO: add handler for heartbeat status -->
                        $ link = "/host/%s" % host.id
                        $ state = host.hbstate
                        <a class="list-group-item list-group-item-$state" href="$link">$host['address']</a>
                </div>
            </div>
        </div>
    </div>

</div>


